language: node_js

node_js:
  - "lts/*"

cache:
  directories:
  - node_modules

deploy:
  provider: pages
  github_token: $GITHUB_TOKEN
  keep_history: true
  on:
    branch: master

before_script:
  - "npm i -g gatsby-cli"
  - "yarn"

script:
  - yarn deploy